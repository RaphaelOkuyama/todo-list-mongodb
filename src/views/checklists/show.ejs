<%- include('../layouts/header', {title: checklist.name}) %>
<%- include('../layouts/menu') %>
 
<section class="section">
    <div class="container">
        <div class="columns">
            <div class="column is-four-fifths">
                <h1 class="title size-4"><%= checklist.name %></h1>
            </div>
            <div class="column is-one-fifth">
                <a href="/checklists/<%= checklist._id %>/tasks/new" class="button is-success is-small">Nova Tarefa</a>
                <a href="/checklists" class="button is-small">Voltar</a>
            </div>
        </div>
 
        <hr />
 
        <% if(checklist.tasks && checklist.tasks.length > 0) { %>
        <% checklist.tasks.forEach(task => { %>
        <div class="task-container <%= task.done ? 'task-done' : '' %>" data-task-id="<%= task._id %>">
            <div class="columns is-vcentered">
                <div class="column is-four-fifths">
                    <label class="custom-checkbox">
                        <input type="checkbox"
                               onchange="updateTaskStatus('<%= task._id %>', this.checked)"
                               <%= task.done ? 'checked' : '' %>>
                        <span class="checkmark"></span>
                        <span class="task-name"><%= task.name %></span>
                    </label>
                    </div>

                <div class="column is-one-fifth">
                    <a href="/tasks/<%= task._id %>?_method=DELETE" class="button is-danger is-small">Remover</a>
                </div>
            </div>
        </div>
        <% }) %>
        <% } else { %>
          <div class="columns">
            <div class="column">
              <p class="has-text-grey-light">Nenhuma tarefa foi adicionada ainda.</p>
          </div>
        </div>
        <% } %>
    </div>
</section>
 
<%- include('../layouts/footer') %>